{% extends 'base_template.html.twig' %}
{% block title %}
	{{constantes.application.website_name}}
	-
	{{ compte.prenom }}
	{{ compte.nom }}
{% endblock %}


{% block body %}
	<div class="container-fluid py-4">
		<div class="bg-white p-4 shadow-sm border rounded-4">
			<a href="index.php" class="btn btn-outline-secondary mb-3">
            <i class="bi bi-arrow-left"> Retour </i>
       		</a>
			<div class="row align-items-center">
				<div class="col-auto">
					<div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center shadow-sm" style="width: 70px; height: 70px; font-weight: bold; font-size: 1.5rem;">
						{{ compte.prenom|first|upper }}{{ compte.nom|first|upper }}
					</div>
				</div>
				<div class="col">
					<h1 class="h2 mb-0 fw-bold">{{ compte.prenom }}
						{{ compte.nom }}</h1>
					<p class="text-muted mb-0">
						<i class="bi bi-envelope me-2"></i>
						{{ compte.email }}</p>
				</div>
				{% if other == false %}
					<div class="col-auto">
						<a href="index.php?controleur=parametre&methode=afficher" class="btn btn-outline-secondary btn-sm">
							<i class="bi bi-gear-fill me-1"></i>
							Paramètres
						</a>
					</div>
				{% endif %}
			</div>

			<hr class="my-4 opacity-25">

			<div class="row g-3">
				<div class="col-auto">
					<span class="badge bg-light text-dark border p-2 px-3">
						<i class="bi bi-calendar3 me-2 text-primary"></i>Membre depuis le
						{{ compte.dateInscription }}
					</span>
				</div>
				{% if compte.note %}
					<div class="col-auto">
						<span class="badge bg-light text-dark border p-2 px-3">
							<i class="bi bi-star-fill me-2 text-warning"></i>
							{{ compte.note }}/5
						</span>
					</div>
				{% endif %}
			</div>

			{% if other == false %}
				<div class="mt-4 d-flex gap-2">
					{% if compte.role == 'administrateur' %}
						<a href="index.php?controleur=admin&methode=dashboard" class="btn btn-danger">
							<i class="bi bi-shield-lock me-2"></i>Back-Office
						</a>
					{% endif %}

					<form method="POST" action="index.php?controleur=connexion&methode=deconnexion">
						<button type="submit" class="btn btn-outline-danger">
							<i class="bi bi-box-arrow-right me-2"></i>Se déconnecter
						</button>
					</form>
				</div>
			{% endif %}
			{% if annonces is not empty %}
				<div class="container-fluid overflow-scroll">
					<h1 class="mt-5">Annonces</h1>
					<div class="scrolling-wrapper row flex-row flex-nowrap mt-4 pb-4 pt-2">


						{% for ann in annonces %}
							<div class="col-md-4 mb-4">
								<a href="index.php?controleur=annonce&methode=afficher&id={{ ann.idAnnonce }}" class="card h-100 text-decoration-none text-dark shadow-sm custom-card">

									<div class="card-body text-center d-flex flex-column">
										<h3 class="h5 card-title text-primary">{{ ann.titre }}</h3>

										<div class="my-3 d-flex align-items-center justify-content-center" style="height: 180px;">
											<img src="{{ ann.url }}" alt="Image de {{ ann.titre }}" class="img-fluid rounded" style="max-height: 100%; object-fit: contain;"/>
										</div>

										<p class="card-text text-muted flex-grow-1">
											{{ ann.description|length > 80 ? ann.description|slice(0, 80) ~ '...' : ann.description }}
										</p>

										<div class="mt-auto">
											<span class="badge bg-light text-dark border p-2 px-3">
												{{ ann.prix }}
												€
											</span>
										</div>
									</div>
								</a>
							</div>
						{% endfor %}
					</div>
				</div>
			{% endif %}
		</div>
	{% endblock %}
