{% extends 'base_template.html.twig' %}
{% block title %}
	{{constantes.application.website_name}}
	-
	{{ compte.prenom }}
	{{ compte.nom }}
{% endblock %}

{% block body %}
	<div
		class="bg-white p-2 border border-2 rounded">

		{# Avatar généré avec les initiales basées sur nom et prenom #}
		<div class="row m-2 align-items-center">
			<div class="  col-1 rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px; font-weight: bold;">
				{{ compte.prenom|first|upper }}{{ compte.nom|first|upper }}
			</div>
			<div class="col">
				<h1>{{ compte.prenom }}
					{{ compte.nom }}</h1>
			</div>
		</div>
		
        <div class="mt-5">
             <p>{{ compte.email }}</p>
		    <p> inscrit depuis le {{ compte.dateInscription }}</p>
            {% if compte.note %}
                <p>
                    {{ compte.note }}</p>
            {% endif %}
        </div>

		{% if compte.role == 'administrateur' %}
			<a href="index.php?controleur=admin&methode=dashboard" class="btn btn-danger mb-3">
				Accéder au Back-Office
			</a>
		{% endif %}

		<form method="POST" action="index.php?controleur=connexion&methode=deconnexion" class="row g-3 position-relative" autocomplete="off">
			<div>
				<button type="submit" class="btn btn-primary me-md-2">Se déconnecter</button>
			</div>
		</form>

        <div class="mt-5">
            <h2> Annonces publiées par {{ compte.prenom }} {{ compte.nom }} </h2>
            {% for ann in annonce %}
                {% if ann.idCompte == compte.idCompte %}
                    <div class="border border-2 rounded p-3 mb-3">
                        <h3>{{ ann.titre }}</h3>
                        <p>{{ ann.description }}</p>
                        <p><strong>Prix :</strong> {{ ann.prix }} €</p>
                        <p><strong>Date de publication :</strong> {{ ann.datePublication }}</p>
                    </div>
                {% endif %}
            {% else %}
                <p>Aucune annonce publiée.</p>
            {% endfor %}

	</div>

{% endblock %}
