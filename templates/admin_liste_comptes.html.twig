{% extends 'base_template.html.twig' %}

{% block title %}
	{{constantes.application.website_name}}
	- Gestion des Comptes
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<h1 class="mb-4">Gestion des Comptes</h1>
		</div>
		<div class="mb-2">
			<a href="index.php?controleur=admin&methode=dashboard" class="btn btn-outline-secondary">Retour Dashboard</a>
		</div>
		<div class="card shadow-sm">
			<div class="table-responsive">
				<table class="table table-hover align-middle mb-0">
					<thead class="table-dark">
						<tr>
							<th class="text-nowrap">Utilisateur</th>
							<th class="text-nowrap">Email</th>
							<th class="text-nowrap">RÃ´le</th>
							<th class="text-nowrap">Date Inscription</th>
							<th class="text-nowrap text-end">Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for c in comptes %}
							<tr>
								<td>
									<strong>{{ c.prenom }}
										{{ c.nom }}</strong>
								</td>
								<td class="text-nowrap">{{ c.email }}</td>
								<td>
									<span class="badge {{ c.role == 'administrateur' ? 'bg-danger' : 'bg-primary' }}">
										{{ c.role|capitalize }}
									</span>
								</td>
								<td>{{ c.dateInscription|date("d/m/Y") }}</td>
								<td class="text-nowrap text-end">
									<a href="index.php?controleur=admin&methode=formulaireModifCompte&id={{ c.idCompte }}" class="btn btn-sm btn-primary">
										<i class="bi bi-pencil-square icone-btn"></i>
									</a>
									<a href="index.php?controleur=admin&methode=supprimerCompte&id={{ c.idCompte }}" class="btn btn-sm btn-danger" onclick="return confirm('Supprimer le compte de {{ c.prenom }} ?')">
										<i class="bi bi-trash icone-btn"></i>
									</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		<div class="mt-4">
			<a href="index.php?controleur=admin&methode=dashboard" class="btn btn-outline-secondary">Retour Dashboard</a>
		</div>
	</div>
{% endblock %}
